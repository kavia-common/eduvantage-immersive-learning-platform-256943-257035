{"is_source_file": true, "format": "JavaScript", "description": "This file defines the WebRTCClient class, which abstracts WebRTC peer connection behavior for immersive classroom sessions. It manages local media, remote participant streams, signaling via a websocket client, and exposes lifecycle events. It also includes utilities for event handling and methods to control media tracks.", "external_files": ["./wsClient", "./logger"], "external_methods": ["wsClient.send", "logger.debug", "logger.warn"], "published": ["WebRTCClient", "createWebRTCClient"], "classes": [{"name": "WebRTCClient", "description": "A class managing WebRTC peer connections, local media tracks, signaling exchange via websocket, and participant streams for a classroom session."}, {"name": "Emitter", "description": "A minimal internal utility class for event handling (on/off/emit)."}], "methods": [{"name": "startLocalMedia(constraints = { audio: true, video: { width: 640, height: 360 } })", "description": "Asynchronously acquires local media streams based on given constraints and emits 'local-stream' event.", "scope": "WebRTCClient", "scopeKind": "class"}, {"name": "join()", "description": "Sets up the peer connection, local media, signaling handlers, and initiates offer/answer exchange to join a classroom session.", "scope": "WebRTCClient", "scopeKind": "class"}, {"name": "leave()", "description": "Cleans up peer connection, signals leave, and clears remote streams.", "scope": "WebRTCClient", "scopeKind": "class"}, {"name": "toggleCamera(on)", "description": "Enables or disables the local video track.", "scope": "WebRTCClient", "scopeKind": "class"}, {"name": "toggleMic(on)", "description": "Enables or disables the local audio track.", "scope": "WebRTCClient", "scopeKind": "class"}, {"name": "getParticipants()", "description": "Returns an array of current participant IDs and their media streams.", "scope": "WebRTCClient", "scopeKind": "class"}, {"name": "_createAndSendOffer()", "description": "Creates a WebRTC offer and sends it via signaling.", "scope": "WebRTCClient", "scopeKind": "class"}, {"name": "_onWsMessage(evt)", "description": "Handles incoming signaling messages from the websocket client.", "scope": "WebRTCClient", "scopeKind": "class"}, {"name": "_handleRemoteOffer({ from, sdp })", "description": "Responds to remote offer by setting remote description, creating an answer, and signaling it.", "scope": "WebRTCClient", "scopeKind": "class"}, {"name": "_handleRemoteAnswer({ sdp })", "description": "Handles remote answer by setting remote description.", "scope": "WebRTCClient", "scopeKind": "class"}, {"name": "_handleRemoteIce({ candidate })", "description": "Adds received ICE candidates to peer connection.", "scope": "WebRTCClient", "scopeKind": "class"}, {"name": "_sendSignal(payload)", "description": "Sends signaling data via the websocket client.", "scope": "WebRTCClient", "scopeKind": "class"}, {"name": "constructor()", "scope": "Emitter", "scopeKind": "class", "description": "unavailable"}, {"name": "constructor({ roomId, userId } = {})", "scope": "WebRTCClient", "scopeKind": "class", "description": "unavailable"}, {"name": "createWebRTCClient(opts)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "emit(evt, payload)", "scope": "Emitter", "scopeKind": "class", "description": "unavailable"}, {"name": "off(evt, handler)", "scope": "Emitter", "scopeKind": "class", "description": "unavailable"}, {"name": "on(event, handler)", "scope": "WebRTCClient", "scopeKind": "class", "description": "unavailable"}, {"name": "on(evt, handler)", "scope": "Emitter", "scopeKind": "class", "description": "unavailable"}], "calls": ["navigator.mediaDevices.getUserMedia", "this.pc.setRemoteDescription", "this.pc.createAnswer", "this.pc.setLocalDescription", "this.pc.addIceCandidate", "wsClient.send"], "search-terms": ["WebRTCClient", "peer connection", "signaling", "media stream", "join classroom", "remote participant streams", "websocket signaling", "local media control"], "state": 2, "file_id": 51, "knowledge_revision": 128, "git_revision": "", "ctags": [{"_type": "tag", "name": "Emitter", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/WebRTCClient.js", "pattern": "/^class Emitter {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "WebRTCClient", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/WebRTCClient.js", "pattern": "/^export class WebRTCClient {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "_createAndSendOffer", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/WebRTCClient.js", "pattern": "/^  async _createAndSendOffer() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "WebRTCClient", "scopeKind": "class"}, {"_type": "tag", "name": "_handleRemoteAnswer", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/WebRTCClient.js", "pattern": "/^  async _handleRemoteAnswer({ sdp }) {$/", "language": "JavaScript", "kind": "method", "signature": "({ sdp })", "scope": "WebRTCClient", "scopeKind": "class"}, {"_type": "tag", "name": "_handleRemoteIce", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/WebRTCClient.js", "pattern": "/^  async _handleRemoteIce({ candidate }) {$/", "language": "JavaScript", "kind": "method", "signature": "({ candidate })", "scope": "WebRTCClient", "scopeKind": "class"}, {"_type": "tag", "name": "_handleRemoteOffer", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/WebRTCClient.js", "pattern": "/^  async _handleRemoteOffer({ from, sdp }) {$/", "language": "JavaScript", "kind": "method", "signature": "({ from, sdp })", "scope": "WebRTCClient", "scopeKind": "class"}, {"_type": "tag", "name": "_onWsMessage", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/WebRTCClient.js", "pattern": "/^  async _onWsMessage(evt) {$/", "language": "JavaScript", "kind": "method", "signature": "(evt)", "scope": "WebRTCClient", "scopeKind": "class"}, {"_type": "tag", "name": "_sendSignal", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/WebRTCClient.js", "pattern": "/^  _sendSignal(payload) {$/", "language": "JavaScript", "kind": "method", "signature": "(payload)", "scope": "WebRTCClient", "scopeKind": "class"}, {"_type": "tag", "name": "config", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/WebRTCClient.js", "pattern": "/^    const config = {$/", "language": "JavaScript", "kind": "class", "scope": "WebRTCClient.join", "scopeKind": "class"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/WebRTCClient.js", "pattern": "/^  constructor() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "Emitter", "scopeKind": "class"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/WebRTCClient.js", "pattern": "/^  constructor({ roomId, userId } = {}) {$/", "language": "JavaScript", "kind": "method", "signature": "({ roomId, userId } = {})", "scope": "WebRTCClient", "scopeKind": "class"}, {"_type": "tag", "name": "createWebRTCClient", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/WebRTCClient.js", "pattern": "/^export function createWebRTCClient(opts) {$/", "language": "JavaScript", "kind": "function", "signature": "(opts)"}, {"_type": "tag", "name": "emit", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/WebRTCClient.js", "pattern": "/^  emit(evt, payload) {$/", "language": "JavaScript", "kind": "method", "signature": "(evt, payload)", "scope": "Emitter", "scopeKind": "class"}, {"_type": "tag", "name": "getParticipants", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/WebRTCClient.js", "pattern": "/^  getParticipants() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "WebRTCClient", "scopeKind": "class"}, {"_type": "tag", "name": "iceServers", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/WebRTCClient.js", "pattern": "/^      iceServers: [$/", "language": "JavaScript", "kind": "property", "scope": "WebRTCClient.join.config", "scopeKind": "class"}, {"_type": "tag", "name": "join", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/WebRTCClient.js", "pattern": "/^  async join() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "WebRTCClient", "scopeKind": "class"}, {"_type": "tag", "name": "leave", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/WebRTCClient.js", "pattern": "/^  async leave() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "WebRTCClient", "scopeKind": "class"}, {"_type": "tag", "name": "off", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/WebRTCClient.js", "pattern": "/^  off(evt, handler) {$/", "language": "JavaScript", "kind": "method", "signature": "(evt, handler)", "scope": "Emitter", "scopeKind": "class"}, {"_type": "tag", "name": "on", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/WebRTCClient.js", "pattern": "/^  on(event, handler) {$/", "language": "JavaScript", "kind": "method", "signature": "(event, handler)", "scope": "WebRTCClient", "scopeKind": "class"}, {"_type": "tag", "name": "on", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/WebRTCClient.js", "pattern": "/^  on(evt, handler) {$/", "language": "JavaScript", "kind": "method", "signature": "(evt, handler)", "scope": "Emitter", "scopeKind": "class"}, {"_type": "tag", "name": "startLocalMedia", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/WebRTCClient.js", "pattern": "/^  async startLocalMedia(constraints = { audio: true, video: { width: 640, height: 360 } }) {$/", "language": "JavaScript", "kind": "method", "signature": "(constraints = { audio: true, video: { width: 640, height: 360 } })", "scope": "WebRTCClient", "scopeKind": "class"}, {"_type": "tag", "name": "toggleCamera", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/WebRTCClient.js", "pattern": "/^  async toggleCamera(on) {$/", "language": "JavaScript", "kind": "method", "signature": "(on)", "scope": "WebRTCClient", "scopeKind": "class"}, {"_type": "tag", "name": "toggleMic", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/WebRTCClient.js", "pattern": "/^  async toggleMic(on) {$/", "language": "JavaScript", "kind": "method", "signature": "(on)", "scope": "WebRTCClient", "scopeKind": "class"}], "hash": "da181fc7823824665c7d41461e9356cf", "format-version": 4, "code-base-name": "learning_platform_frontend", "filename": "learning_platform_frontend/src/services/WebRTCClient.js", "fields": [{"name": "iceServers: [", "scope": "WebRTCClient.join.config", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"128": ""}]}
{"is_source_file": true, "format": "JavaScript", "description": "This file defines a service module for interacting with a Supabase backend, encapsulating CRUD operations for user profiles, courses, wishlists, carts, and enrollments, along with error handling for missing tables and access issues.", "external_files": ["../supabaseClient"], "external_methods": ["supabase.from", "supabase.select", "supabase.upsert", "supabase.insert", "supabase.update", "supabase.delete", "supabase.order", "supabase.eq", "supabase.maybeSingle", "supabase.single"], "published": ["getOrCreateProfileRole", "setProfileRole", "getProfile", "createCourse", "updateCourse", "getInstructorCourses", "getAllCourses", "getOrCreateWishlist", "addToWishlist", "removeFromWishlist", "getWishlistItems", "getOrCreateCart", "addToCart", "removeFromCart", "getCartItems", "clearCart", "checkoutAndEnroll", "supaErrors"], "classes": [], "methods": [{"name": "getOrCreateProfileRole(userId, role)", "description": "Ensures a user profile exists with specified role, creating or updating as necessary.", "scope": "", "scopeKind": ""}, {"name": "setProfileRole(userId, role)", "description": "Updates or inserts a user's profile role explicitly.", "scope": "", "scopeKind": ""}, {"name": "getProfile(userId)", "description": "Retrieves profile information for a user by userId.", "scope": "", "scopeKind": ""}, {"name": "createCourse(course)", "description": "Creates a new course record with provided course data.", "scope": "", "scopeKind": ""}, {"name": "updateCourse(courseId, patch)", "description": "Updates an existing course record identified by courseId.", "scope": "", "scopeKind": ""}, {"name": "getInstructorCourses(instructorId)", "description": "Fetches courses associated with a specific instructor.", "scope": "", "scopeKind": ""}, {"name": "getAllCourses()", "description": "Retrieves all courses from the database.", "scope": "", "scopeKind": ""}, {"name": "getOrCreateWishlist(userId)", "description": "Fetches an existing wishlist for a user or creates one if missing.", "scope": "", "scopeKind": ""}, {"name": "addToWishlist(userId, courseId)", "description": "Adds a course to the user's wishlist.", "scope": "", "scopeKind": ""}, {"name": "removeFromWishlist(userId, courseId)", "description": "Removes a course from the user's wishlist.", "scope": "", "scopeKind": ""}, {"name": "getWishlistItems(userId)", "description": "Retrieves all wishlist items for a user.", "scope": "", "scopeKind": ""}, {"name": "getOrCreateCart(userId)", "description": "Fetches or creates a shopping cart for a user.", "scope": "", "scopeKind": ""}, {"name": "addToCart(userId, courseId, quantity = 1)", "description": "Adds a course to the user's cart or updates its quantity.", "scope": "", "scopeKind": ""}, {"name": "removeFromCart(userId, courseId)", "description": "Removes a specific course from the user's cart.", "scope": "", "scopeKind": ""}, {"name": "getCartItems(userId)", "description": "Retrieves all items in the user's cart.", "scope": "", "scopeKind": ""}, {"name": "clearCart(userId)", "description": "Empties all items from the user's cart.", "scope": "", "scopeKind": ""}, {"name": "checkoutAndEnroll(userId)", "description": "Enrolls a user in all courses in their cart and clears it.", "scope": "", "scopeKind": ""}, {"name": "isTableMissing(error)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "setupRequired(message = \"Supabase tables are missing or access is denied.\")", "scope": "supaErrors", "scopeKind": "class", "description": "unavailable"}], "calls": ["supabase.from", "supabase.select", "supabase.upsert", "supabase.insert", "supabase.update", "supabase.delete", "supabase.order", "supabase.eq", "supabase.maybeSingle", "supabase.single"], "search-terms": ["supabaseDataService", "profiles", "courses", "wishlists", "wishlist_items", "carts", "cart_items", "enrollments", "supabase", "relation does not exist", "relation", "permission denied", "row-level security", "schema does not exist"], "state": 2, "file_id": 127, "knowledge_revision": 438, "git_revision": "", "ctags": [{"_type": "tag", "name": "addToCart", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/supabaseDataService.js", "pattern": "/^export async function addToCart(userId, courseId, quantity = 1) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId, courseId, quantity = 1)"}, {"_type": "tag", "name": "addToWishlist", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/supabaseDataService.js", "pattern": "/^export async function addToWishlist(userId, courseId) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId, courseId)"}, {"_type": "tag", "name": "checkoutAndEnroll", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/supabaseDataService.js", "pattern": "/^export async function checkoutAndEnroll(userId) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId)"}, {"_type": "tag", "name": "clearCart", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/supabaseDataService.js", "pattern": "/^export async function clearCart(userId) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId)"}, {"_type": "tag", "name": "createCourse", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/supabaseDataService.js", "pattern": "/^export async function createCourse(course) {$/", "language": "JavaScript", "kind": "function", "signature": "(course)"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/supabaseDataService.js", "pattern": "/^      description: String(course.description || \"\").trim(),$/", "language": "JavaScript", "kind": "property", "scope": "createCourse.payload", "scopeKind": "class"}, {"_type": "tag", "name": "getAllCourses", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/supabaseDataService.js", "pattern": "/^export async function getAllCourses() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getCartItems", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/supabaseDataService.js", "pattern": "/^export async function getCartItems(userId) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId)"}, {"_type": "tag", "name": "getInstructorCourses", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/supabaseDataService.js", "pattern": "/^export async function getInstructorCourses(instructorId) {$/", "language": "JavaScript", "kind": "function", "signature": "(instructorId)"}, {"_type": "tag", "name": "getOrCreateCart", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/supabaseDataService.js", "pattern": "/^export async function getOrCreateCart(userId) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId)"}, {"_type": "tag", "name": "getOrCreateProfileRole", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/supabaseDataService.js", "pattern": "/^export async function getOrCreateProfileRole(userId, role) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId, role)"}, {"_type": "tag", "name": "getOrCreateWishlist", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/supabaseDataService.js", "pattern": "/^export async function getOrCreateWishlist(userId) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId)"}, {"_type": "tag", "name": "getProfile", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/supabaseDataService.js", "pattern": "/^export async function getProfile(userId) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId)"}, {"_type": "tag", "name": "getWishlistItems", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/supabaseDataService.js", "pattern": "/^export async function getWishlistItems(userId) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId)"}, {"_type": "tag", "name": "instructor_id", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/supabaseDataService.js", "pattern": "/^      instructor_id: course.instructor_id,$/", "language": "JavaScript", "kind": "property", "scope": "createCourse.payload", "scopeKind": "class"}, {"_type": "tag", "name": "isTableMissing", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/supabaseDataService.js", "pattern": "/^function isTableMissing(error) {$/", "language": "JavaScript", "kind": "function", "signature": "(error)"}, {"_type": "tag", "name": "payload", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/supabaseDataService.js", "pattern": "/^    const payload = {$/", "language": "JavaScript", "kind": "class", "scope": "createCourse", "scopeKind": "class"}, {"_type": "tag", "name": "price", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/supabaseDataService.js", "pattern": "/^      price: Number(course.price ?? 0),$/", "language": "JavaScript", "kind": "property", "scope": "createCourse.payload", "scopeKind": "class"}, {"_type": "tag", "name": "removeFromCart", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/supabaseDataService.js", "pattern": "/^export async function removeFromCart(userId, courseId) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId, courseId)"}, {"_type": "tag", "name": "removeFromWishlist", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/supabaseDataService.js", "pattern": "/^export async function removeFromWishlist(userId, courseId) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId, courseId)"}, {"_type": "tag", "name": "setProfileRole", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/supabaseDataService.js", "pattern": "/^export async function setProfileRole(userId, role) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId, role)"}, {"_type": "tag", "name": "setupRequired", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/supabaseDataService.js", "pattern": "/^  setupRequired(message = \"Supabase tables are missing or access is denied.\") {$/", "language": "JavaScript", "kind": "method", "signature": "(message = \"Supabase tables are missing or access is denied.\")", "scope": "supaErrors", "scopeKind": "class"}, {"_type": "tag", "name": "source_url", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/supabaseDataService.js", "pattern": "/^      source_url: course.source_url || \"\",$/", "language": "JavaScript", "kind": "property", "scope": "createCourse.payload", "scopeKind": "class"}, {"_type": "tag", "name": "supaErrors", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/supabaseDataService.js", "pattern": "/^export const supaErrors = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "thumbnail", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/supabaseDataService.js", "pattern": "/^      thumbnail: course.thumbnail || \"\",$/", "language": "JavaScript", "kind": "property", "scope": "createCourse.payload", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/supabaseDataService.js", "pattern": "/^      title: String(course.title || \"\").trim(),$/", "language": "JavaScript", "kind": "property", "scope": "createCourse.payload", "scopeKind": "class"}, {"_type": "tag", "name": "updateCourse", "path": "/home/kavia/workspace/code-generation/eduvantage-immersive-learning-platform-256943-257035/learning_platform_frontend/src/services/supabaseDataService.js", "pattern": "/^export async function updateCourse(courseId, patch) {$/", "language": "JavaScript", "kind": "function", "signature": "(courseId, patch)"}], "hash": "a090672b0705b7ad676322f3222ca2cc", "format-version": 4, "code-base-name": "learning_platform_frontend", "filename": "learning_platform_frontend/src/services/supabaseDataService.js", "fields": [{"name": "description: String(course.description || \"\").trim(),", "scope": "createCourse.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "instructor_id: course.instructor_id,", "scope": "createCourse.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "price: Number(course.price ?? 0),", "scope": "createCourse.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "source_url: course.source_url || \"\",", "scope": "createCourse.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "thumbnail: course.thumbnail || \"\",", "scope": "createCourse.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "title: String(course.title || \"\").trim(),", "scope": "createCourse.payload", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"438": ""}]}